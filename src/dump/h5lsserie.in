#! /bin/sh

H=0
D=0
L=0
while test $# -ne 0; do
  case $1 in
    -d)        D=1;;
    -h|--help) H=1;;
    -l)        L=1;;
    -*)        echo "Invalid option: $1; see output of h5lsserie"
               exit 1;;
    *)         FILE=$1;;
  esac
  shift
done

if [ $H -eq 1 ]; then
  echo "Lists the groups and datasets in a hdf5 file."
  echo ""
  echo "Usage:"
  echo "  h5lsserie [-d] [-l] <file.h5>"
  echo "    -h, --help: Show this help"
  echo "    -d:         Show 'Description' attribute"
  echo "    -l:         Show 'Column Label' attribute"
  exit 0
fi

prefix=@prefix@

@h5dump@ -xA $FILE | xsltproc -param FILENAME "'$FILE'" -param LABEL $L -param DESCRIPTION $D @datadir@/hdf5serie/xsl/h5lsserie.xsl -
